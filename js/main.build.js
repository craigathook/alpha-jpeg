!function e(t,n,a){function r(i,s){if(!n[i]){if(!t[i]){var d="function"==typeof require&&require;if(!s&&d)return d(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return r(n?n:e)},c,c.exports,e,t,n,a)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(e,t,n){"use strict";function a(e,t){console.log("imageLoaded"),u.parentElement.removeChild(u);var n=document.createElement("img");n.src=e,p.appendChild(n),btnGenerate.onclick=function(e){e.stopPropagation(),e.preventDefault();var a=r(n);for(g.style.width=n.width+"px",g.style.height=n.height+"px",g.style.margin="0 auto";g.firstChild;)g.removeChild(g.firstChild);c.load(g,a.src,{onComplete:function(){var e=document.getElementById("btnDownload");setTimeout(function(){btnGenerate.scrollIntoView()},10),e.onclick=function(){d(a,t)}}.bind(a)}),t=t.replace(".png",".alpha.jpg");var o="data:image/jpeg;base64,",i=Math.round(3*(a.src.length-o.length)/4);previewTitle.innerHTML="Preview ("+Math.round(i/1024*100)/100+"k)"}}function r(e){var t=document.getElementById("qualitySetting").value;console.log("qualitySetting",t);var n=o(e),a=s(n,t);return a}function o(e){var t=document.createElement("canvas"),n=e.width,a=e.height;t.width=2*n,t.height=a,t.style.width=2*n+"px",t.style.height=a+"px";var r=t.getContext("2d");r.drawImage(e,0,0),r.fillRect(n,0,n,a);for(var o=r.getImageData(0,0,n,a),s=o.data,d=r.getImageData(n,0,n,a),l=d.data,c=0,u=s.length;c<u;c+=4){var p=Number(s[c+3]);l[c+0]=0,l[c+1]=0,l[c+2]=0,l[c+0]=p,l[c+1]=p,l[c+2]=p,l[c+3]=255,s[c+3]=255}return r.putImageData(o,0,0),r.putImageData(d,n,0),i(t)}function i(e){var t=e.toDataURL(),n=document.createElement("img");return n.src=t,n}function s(e,t){var n=document.createElement("img");return n.src=l.compress(e,t,"jpg").src,n}function d(e,t){var n=document.createElement("a");n.setAttribute("href",e.src),n.setAttribute("download",t),n.click()}var l=e("j-i-c"),c=e("alpha-jpeg"),u=(document.getElementById("container"),document.getElementById("dropArea")),p=(document.getElementById("blankArea"),document.getElementById("source")),g=document.getElementById("preview");p.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),p.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault();for(var t,n=e.dataTransfer.files,r=0;t=n[r];r++)if(console.log("file",t),t.type.match(/image.*/)){var o=new FileReader;o.onload=function(e){a(e.target.result,t.name),sourceTitle.innerHTML="Source ("+Math.round(t.size/1024*100)/100+"k)"},o.readAsDataURL(t);break}})},{"alpha-jpeg":2,"j-i-c":3}],2:[function(e,t,n){function a(){var e=this;e.load=function(e,t,n){var a=function(){};"string"==typeof e&&(e=document.querySelector(e));var r=1,o="svg";n||(n={}),n.hasOwnProperty("onComplete")&&(a=n.onComplete),n.hasOwnProperty("pixelRatio")&&(r=n.pixelRatio),n.hasOwnProperty("renderer")&&(o=n.renderer);var i=document.createElement("canvas"),s=document.createElement("img"),d=document.createElement("div"),l=document.createElement("div");s.crossOrigin="Anonymous",s.src=t,"svg"==o&&(s.onload=function(){var n=s.width,o=s.height;l.style.width=n/2/r+"px",l.style.height=o/r+"px",d.style.position="relative",d.style.transform="scale("+1/r+")",d.style.transformOrigin="top left",d.style.webkitTransform="scale("+1/r+")",d.style.webkitTransformOrigin="top left",d.style.width=n/2+"px",d.style.height=o+"px",d.style.overflow="hidden",d.style.opacity="0.999999";var i=n/2,c=o,u=n,p=o,g=t,m=new Date,h=(m.getTime(),g.split("/")[g.split("/").length-1].replace(/[|&\-;$%@_."<>=()+,]/g,"")),f="imageMask"+h,v="imageSource"+h,y='<svg id="'+h+'" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+i+" "+c+'" class="svg-elem"><defs><mask id="'+f+'"><image id="'+v+'" width="'+u+'" height="'+p+'" xlink:href="'+g+'" x="-'+i+'"></image></mask></defs><image mask="url(#'+f+')" id="sourceImage" width="'+u+'" height="'+p+'" xlink:href="'+g+'"></image></svg>';d.innerHTML=y;var w=d.children[0];navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1?w.onload=function(){a(w)}:a(w),l.appendChild(d),e.appendChild(l)}),"canvas"==o&&(s.onload=function(){var t=s.width,n=s.height;i.width=t,i.height=n,i.style.width=t/r+"px",i.style.height=n/r+"px",d.style.width=t/2/r+"px",d.style.height=n/r+"px",d.style.overflow="hidden";var o=i.getContext("2d");o.drawImage(s,0,0);for(var l=o.getImageData(0,0,t/2,n),c=l.data,u=o.getImageData(t/2,0,t/2,n),p=u.data,g=0,m=c.length;g<m;g+=4){var h=p[g];c[g+3]=h}o.putImageData(l,0,0),d.appendChild(i),e.appendChild(d),a(d)})}}t.exports=new a},{}],3:[function(e,t,n){var a={compress:function(e,t,n){var a="image/jpeg";"undefined"!=typeof n&&"png"==n&&(a="image/png");var r=document.createElement("canvas");r.width=e.naturalWidth,r.height=e.naturalHeight;var o=(r.getContext("2d").drawImage(e,0,0),r.toDataURL(a,t/100)),i=new Image;return i.src=o,i},upload:function(e,t,n,a,r,o,i,s){void 0===XMLHttpRequest.prototype.sendAsBinary&&(XMLHttpRequest.prototype.sendAsBinary=function(e){var t=Array.prototype.map.call(e,function(e){return 255&e.charCodeAt(0)});this.send(new Uint8Array(t).buffer)});var d="image/jpeg";".png"==a.substr(-4).toLowerCase()&&(d="image/png");var l=e.src;l=l.replace("data:"+d+";base64,","");var c=new XMLHttpRequest;c.open("POST",t,!0);var u="someboundary";if(c.setRequestHeader("Content-Type","multipart/form-data; boundary="+u),s&&"object"==typeof s)for(var p in s)c.setRequestHeader(p,s[p]);i&&i instanceof Function&&(c.upload.onprogress=function(e){e.lengthComputable&&i(e.loaded/e.total*100)}),c.sendAsBinary(["--"+u,'Content-Disposition: form-data; name="'+n+'"; filename="'+a+'"',"Content-Type: "+d,"",atob(l),"--"+u+"--"].join("\r\n")),c.onreadystatechange=function(){4==this.readyState&&(200==this.status?r(this.responseText):this.status>=400&&o&&o instanceof Function&&o(this.responseText))}}};t.exports=a},{}]},{},[1]);